@{
    ViewData["Title"] = "Upload Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Demo Sample building Web Upload Image/File with ASP.NET Core</p>
</div>

<h2>1. Upload Image For CKEditor</h2>
<textarea name="blog-ckeditor"></textarea>


<h2>2. Upload Image For Form</h2>

<form asp-controller="Upload" asp-action="UploadImage" method="post"
      enctype="multipart/form-data">
    <input type="file" name="file" /> <br />
    <button type="submit">Upload Image To Form</button>
</form>
<br />


<h2>3. Upload Multiple Files</h2>

<form asp-controller="Upload" asp-action="UploadFiles" method="post"
      enctype="multipart/form-data">
    <input type="file" name="files" multiple /> <br />
    <button type="submit">Upload Files Multiple</button>
</form>
<br />



@section scripts{
    <script src="~/lib/ckeditor/ckeditor.js"></script>
    <script>CKEDITOR.replace('blog-ckeditor', {
            language: 'vi',
            filebrowserUploadMethod: 'form',
            filebrowserImageUploadUrl: '/Upload/UploadImageForCKEditor',
            //removeDialogTabs : 'image:advanced;image:Link;link:advanced;link:upload'
        });

        //Fix: cannot click on element ck in modal
        $.fn.modal.Constructor.prototype.enforceFocus = function () {
            $(document)
                .off('focusin.bs.modal') // guard against infinite focus loop
                .on('focusin.bs.modal', $.proxy(function (e) {
                    if (
                        this.$element[0] !== e.target && !this.$element.has(e.target).length
                        // CKEditor compatibility fix start.
                        && !$(e.target).closest('.cke_dialog, .cke').length
                        // CKEditor compatibility fix end.
                    ) {
                        this.$element.trigger('focus');
                    }
                }, this));
        };</script>
}